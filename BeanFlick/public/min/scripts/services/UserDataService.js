App.service("UserDataService",function(e,r){var t={currentUser:null,getCurrentUser:function(){var s=r.defer(),n=localStorage.getItem("SessionId");return null!=n?e.get("/api/user/"+n).then(function(e){return null==e.data||""==e.data?(localStorage.removeItem("SessionId"),s.resolve(t.getCurrentUser())):(t.currentUser=e.data,void s.resolve(t.currentUser))}):e.post("/api/user/create").then(function(e){if(t.currentUser=e.data,t.currentUser.Sessions.length<0)throw Error("Invalid session");var r=t.currentUser.Sessions[t.currentUser.Sessions.length-1];localStorage.setItem("SessionId",r.ClientId),s.resolve(t.currentUser)}),s.promise}};return t});