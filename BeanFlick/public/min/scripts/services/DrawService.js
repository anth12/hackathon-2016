App.service("DrawService",["CanvasFactory","InteractionFactory","ImageFactory","GlobalSettingsService","CalculatorService","$q",function(e,t,r,a,n,o){function c(r){i(),e.canvasContext.drawImage(r.image,t.x-r.centerX,t.y-r.centerY,r.width,r.height),f=window.requestAnimationFrame(function(){c(r)})}function i(){e.canvasContext.clearRect(0,0,e.width,e.height)}var f,s;this.draw=function(e){c(e)},this.clear=function(){i()},this.movement=function(){var c=o.defer();return s=setInterval(function(){var o=n.friction();o?(clearInterval(s),a.restartGame()):(t.y-r.throwable.centerY+e.offsetTop>0&&t.y+r.throwable.centerY+e.offsetTop<e.offsetTop+e.height?t.y-=t.movementData.speedY/300:(clearInterval(s),c.resolve(!0)),t.x-r.throwable.centerX+e.offsetLeft>0&&t.x+r.throwable.centerX+e.offsetLeft<e.offsetLeft+e.width?t.x+=t.movementData.speedX/300:(clearInterval(s),c.resolve(!0)))}),c.promise}}]);