App.service("DrawService",["CanvasFactory","InteractionFactory","ImageFactory","GlobalSettingsService","CalculatorService","$q",function(e,t,n,a,o,r){function i(n){c(),e.canvasContext.drawImage(n.image,t.x-n.centerX,t.y-n.centerY,n.width,n.height),f=window.requestAnimationFrame(function(){i(n)})}function c(){e.canvasContext.clearRect(0,0,e.width,e.height)}var f,s;this.draw=function(e){i(e)},this.clear=function(){c()},this.movement=function(){var i=r.defer();return s=setInterval(function(){o.friction(),t.movementData.speedX-=a.globalSettings().friction,t.y-n.throwable.centerY+e.offsetTop>0&&t.y+n.throwable.centerY+e.offsetTop<e.offsetTop+e.height?t.y-=t.movementData.speedY/300:(clearInterval(s),i.resolve(!0)),t.x-n.throwable.centerX+e.offsetLeft>0&&t.x+n.throwable.centerX+e.offsetLeft<e.offsetLeft+e.width?t.x+=t.movementData.speedX/300:(clearInterval(s),i.resolve(!0))}),i.promise}}]);