App.service("DrawService",["CanvasFactory","InteractionFactory","ImageFactory",function(e,t,n){function r(n){a(),e.canvasContext.drawImage(n.image,t.x-n.centerX,t.y-n.centerY,n.width,n.height),o=window.requestAnimationFrame(function(){r(n)})}function a(){e.canvasContext.clearRect(0,0,e.width,e.height)}var o,c;this.draw=function(e){r(e)},this.clear=function(){a()},this.movement=function(){var r=Q.defer();return c=setInterval(function(){t.y-n.throwable.centerY+e.offsetTop>0&&t.y+n.throwable.centerY+e.offsetTop<e.offsetTop+e.height?t.y-=t.movementData.speedY/300:(clearInterval(c),r.resolve(!0)),t.x-n.throwable.centerX+e.offsetLeft>0&&t.x+n.throwable.centerX+e.offsetLeft<e.offsetLeft+e.width?t.x+=t.movementData.speedX/300:(clearInterval(c),r.resolve(!0))}),r.promise}}]);