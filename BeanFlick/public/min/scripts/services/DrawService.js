App.service("DrawService",["$q","CanvasFactory","InteractionFactory","ImageFactory","GlobalSettingsService","CalculatorService",function(e,t,r,n,a,o){function c(e){i(),t.canvasContext.drawImage(e.image,r.x-e.centerX,r.y-e.centerY,e.width,e.height),f=window.requestAnimationFrame(function(){c(e)})}function i(){t.canvasContext.clearRect(0,0,t.width,t.height)}var f,s;this.draw=function(e){c(e)},this.clear=function(){i()},this.movement=function(){var a=e.defer();return s=setInterval(function(){var e=o.friction();e?(clearInterval(s),a.resolve(!0)):(r.y-n.throwable.centerY+t.offsetTop>0&&r.y+n.throwable.centerY+t.offsetTop<t.offsetTop+t.height?r.y-=r.movementData.speedY/300:(clearInterval(s),a.resolve(!0)),r.x-n.throwable.centerX+t.offsetLeft>0&&r.x+n.throwable.centerX+t.offsetLeft<t.offsetLeft+t.width?r.x+=r.movementData.speedX/300:(clearInterval(s),a.resolve(!0)))}),a.promise}}]);