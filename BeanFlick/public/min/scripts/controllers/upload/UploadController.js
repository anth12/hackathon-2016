App.controller("UploadController",function(e,o,t,a,n){e.Enabled=!1,e.MouthLeft={X:165,Y:335},e.MouthRight={X:180,Y:335},e.toggle=function(o){e.Enabled=o},e.fileNameChanged=function(o){var t=new FileReader;t.onload=function(){e.Image=t.result,e.$apply()},t.readAsDataURL(o.target.files[0])},e.submit=function(){if(null==e.Image)return void t.warning("Please specify the Image you would like to use");if(null==e.Name||""==e.Name)return void t.warning("Please give your game a name");var o=new FormData($(".upload-form form")[0]);$.ajax({type:"POST",url:"/api/custom/create",data:o,cache:!1,contentType:!1,processData:!1,success:function(e){location.href=e.UrlCode},error:function(e){t.error("Failed to create custom game")}})};var u=$('[data-id="MouthLeft"]');u.css("left",e.MouthLeft.X+"px"),u.css("top",e.MouthLeft.Y+"px"),u=$('[data-id="MouthRight"]'),u.css("left",e.MouthRight.X+"px"),u.css("top",e.MouthRight.Y+"px");var r=null;$(".upload-preview").on("mousedown",".marker",function(o){r=$(o.target).data("id"),document.addEventListener("mousemove",e.mouseMove,!1)}),e.mouseMove=function(o){var t=$(".upload-preview").position();e[r].X=o.pageX-t.left,e[r].Y=o.pageY-t.top;var a=$('[data-id="'+r+'"]');a.css("left",e[r].X+"px"),a.css("top",e[r].Y+"px"),document.addEventListener("mouseup",e.eleMouseUp,!1)},e.eleMouseUp=function(o){document.removeEventListener("mousemove",e.mouseMove,!1),document.removeEventListener("mouseup",e.eleMouseUp,!1)}});